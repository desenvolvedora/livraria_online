build_settings:
    clone_depth: 1
    verbose: true
    ignore:
        - "vendor"
        - "tests"
        - "Dockerfile"
        - "Dockerfile.save"

setup:
    shell: 
        - "cd %BUILD_PATH% && mv .htaccess.dist .htaccess"
        - "cd %BUILD_PATH%appication/config && mv config.php.dist config.php"


test:
    php_unit:
    # php_loc:
    #     directory: "src"
    
    # lint:
    #     directories:
    #       - "src/"
    #       - "tests/"

    php_code_sniffer:
        standard: "PSR2"
        allowed_errors: -1
        allowed_warnings: -1
        ignore:
            - "public"
            - "tests"
            - "vendor"
            - "Dockerfile"
            - "Dockerfile.save"
            - "deployer.phar"
            - "docker-compose.yml"
            - "phpci.yml.dist"
            - "phpci.yml.save"
            - "phpunit.xml"
            
failure:
    email:
        committer: true

success:
    shell: 
        - "cd %BUILD_PATH% && dep deploy producao"
        - "cd %BUILD_PATH% && mv .htaccess.dist .htaccess"
        - "cd %BUILD_PATH%/appication/config && mv config.php.dist config.php"
